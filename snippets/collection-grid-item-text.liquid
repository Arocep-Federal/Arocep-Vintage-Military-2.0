{% style %}
.all-categories nav ul {
  list-style:none;
}
.all-categories nav ul > li {
  border:1px solid #ccc;
  padding: 5px 10px;
}
.all-categories nav ul > li > ul {
  height:0;
  max-height:0;
  overflow:hidden;
  transition:1s all ease;
}
.all-categories ul li.active > ul {
  height:auto;
  max-height:2000px;
}
{% endstyle %}

<script>

$( document ).ready(function() {
  console.log("ready");
  $(".top-category").on("click", function(e){
    e.preventDefault();
    if($(this).hasClass("active")) {
      $(this).removeClass("active");
    } else {
      $(this).addClass("active");
    }
    console.log("clicked")
  })
})
</script>

<div class="all-categories">
<nav role="navigation">
    {%- for link in linklists.vintage-military-theme.links -%} 
      {% comment %} <li> {% endcomment %}
        {% comment %} <a href="{{ link.url }}" {% if link.active %}aria-current="page"{% endif %}>
          {{ link.title }}
        </a> {% endcomment %}

        {%- if link.links != blank -%}
          <ul>
            {%- for child_link in link.links -%}
              <li class="top-category">
                <a href="{{ child_link.url }}" {% if child_link.active %}aria-current="page"{% endif %}>
                  {{ child_link.title }}
                </a>

                {%- if child_link.links != blank -%}
                  <ul>
                    {%- for grandchild_link in child_link.links -%}
                      <li>
                        <a href="{{ grandchild_link.url }}" {% if grandchild_link.active %}aria-current="page"{% endif %}>
                          {{ grandchild_link.title }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}

              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}

      {% comment %} </li> {% endcomment %}
    {%- endfor -%}
</nav>
</div>